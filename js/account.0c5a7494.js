(self["webpackChunkgovernance_aepp"]=self["webpackChunkgovernance_aepp"]||[]).push([[809],{20640:function(e,t,a){"use strict";var o=a(25108),s=a(11742),n={"text/plain":"Text","text/html":"Url",default:"Text"},i="Copy to clipboard: #{key}, Enter";function l(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function r(e,t){var a,r,d,c,u,h,g=!1;t||(t={}),a=t.debug||!1;try{d=s(),c=document.createRange(),u=document.getSelection(),h=document.createElement("span"),h.textContent=e,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",(function(s){if(s.stopPropagation(),t.format)if(s.preventDefault(),"undefined"===typeof s.clipboardData){a&&o.warn("unable to use e.clipboardData"),a&&o.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=n[t.format]||n["default"];window.clipboardData.setData(i,e)}else s.clipboardData.clearData(),s.clipboardData.setData(t.format,e);t.onCopy&&(s.preventDefault(),t.onCopy(s.clipboardData))})),document.body.appendChild(h),c.selectNodeContents(h),u.addRange(c);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");g=!0}catch(w){a&&o.error("unable to copy using execCommand: ",w),a&&o.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),g=!0}catch(w){a&&o.error("unable to copy using clipboardData: ",w),a&&o.error("falling back to prompt"),r=l("message"in t?t.message:i),window.prompt(r,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),h&&document.body.removeChild(h),d()}return g}e.exports=r},11742:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],o=0;o<e.rangeCount;o++)a.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},20164:function(e,t,a){"use strict";a.d(t,{Z:function(){return W}});var o=a(66252),s=a(3577),n=a(49963),i=a.p+"img/copy.96784235.svg",l=a.p+"img/open_arrow.d453c5f3.svg";const r=e=>((0,o.dD)("data-v-6e17f07a"),e=e(),(0,o.Cn)(),e),d={class:"mx-4 mt-2 ae-card"},c={key:0,class:"absolute flex inset-0 justify-center items-center bg-primary z-20"},u=r((()=>(0,o._)("span",null,"Copied address to clipboard",-1))),h=[u],g={class:"flex justify-between items-center mt-2"},p={key:0},w={class:"flex justify-between items-center mt-3"},v={key:0,class:"text-sm font-bold font-mono ml-auto"},m={key:1,class:"w-5"},y={key:0,class:"flex justify-between items-center my-3"},f=r((()=>(0,o._)("div",{class:"text-xs opacity-90 leading-tight flex-1"},[(0,o.Uk)(" Estimated delegated stake "),(0,o._)("br"),(0,o.Uk)(" Delegators votes can overwrite delegation ")],-1))),b={class:"text-sm font-bold font-mono ml-auto text-right"},k={key:0,class:"w-5"},x={key:1,class:"flex justify-between items-center my-3"},D=r((()=>(0,o._)("div",{class:"text-xs opacity-90 leading-tight"}," Could not fetch information about delegated stake. ",-1))),C=[D],_={class:"flex justify-between items-center"},T=r((()=>(0,o._)("div",{class:"text-xs opacity-90 leading-tight font-bold"}," Estimated voting power ",-1))),E={key:0,class:"text-sm font-bold font-mono ml-auto leading-tight mt-1"},P=r((()=>(0,o._)("img",{src:l,class:"w-full",alt:"show voting power"},null,-1))),S=[P];function A(e,t,a,l,r,u){const D=(0,o.up)("AeIdentityLight");return(0,o.wg)(),(0,o.iD)("div",d,[((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["bg-primary px-3 w-full text-2xl text-white relative rounded-t ae-max-height-0 overflow-hidden ae-transition-300",{"ae-max-height-40":r.open}]),key:a.address},[(0,o.Wm)(n.uT,{name:"fade"},{default:(0,o.w5)((()=>[r.showCopyNotice?((0,o.wg)(),(0,o.iD)("div",c,h)):(0,o.kq)("",!0)])),_:1}),(0,o._)("div",g,[(0,o._)("span",null,[r.isOwnAccount?((0,o.wg)(),(0,o.iD)("span",p,"Your ")):(0,o.kq)("",!0),(0,o.Uk)(" Account")]),(0,o._)("img",{src:i,class:"w-4 h-4 text-white cursor-pointer",onClick:t[0]||(t[0]=(...e)=>u.copyToClipboard&&u.copyToClipboard(...e)),alt:"copy"})]),(0,o._)("div",w,[(0,o._)("div",null,[(0,o.Wm)(D,{collapsed:!0,balance:"",address:a.address,class:"text-white",invert:!0,onClick:u.copyToClipboard},null,8,["address","onClick"])]),null!==r.balance?((0,o.wg)(),(0,o.iD)("div",v,(0,s.zw)(u.toAE(r.balance)),1)):(0,o.kq)("",!0),a.canOpen?((0,o.wg)(),(0,o.iD)("div",m)):(0,o.kq)("",!0)]),r.delegatedPower?((0,o.wg)(),(0,o.iD)("div",y,[f,(0,o._)("div",b,(0,s.zw)(u.toAE(r.delegatedPower)),1),a.canOpen?((0,o.wg)(),(0,o.iD)("div",k)):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.iD)("div",x,C))],2)),(0,o._)("div",{class:(0,s.C_)(["bg-ae-purple text-white pl-3 pr-2 py-2 rounded-b",{"rounded-t":!r.open,"pr-3":!a.canOpen}])},[(0,o._)("div",_,[T,r.totalStake?((0,o.wg)(),(0,o.iD)("div",E,(0,s.zw)(u.toAE(r.totalStake)),1)):(0,o.kq)("",!0),a.canOpen?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,s.C_)(["w-5 flex justify-center items-center ml-2 ae-transition-300",{"rotate-90":r.open}]),onClick:t[1]||(t[1]=e=>r.open=!r.open)},S,2)):(0,o.kq)("",!0)])],2)])}var O=a(45468),I=a(81251),Z=a(10237),q=a(70794),U=a(20640),L=a.n(U),z=a(16395),B=a(25108),$={name:"AccountHeader",components:{AeIdentityLight:O.Z},props:{address:{type:String,default:"",required:!0},pollAddress:{type:String,default:null},startOpen:{type:Boolean,default:!0},canOpen:{type:Boolean,default:!0}},data(){return{balance:null,delegatedPower:null,totalStake:null,isOwnAccount:!1,showCopyNotice:!1,open:!0}},methods:{toAE:z.zx,async loadData(){I.gU.isStatic||(this.isOwnAccount=I.gU.walletAddress===this.address),this.balance=await I.SZ.getBalance(this.address),await new Z.Z(I.gU.networkId).delegatedPower(this.address,this.pollAddress).then((e=>{null===e?this.totalStake=new q.Z(this.balance):(this.delegatedPower=e.delegatedPower,this.totalStake=new q.Z(this.balance).plus(this.delegatedPower))})).catch((e=>{B.error(e),this.totalStake=new q.Z(this.balance)}))},copyToClipboard(){L()(this.address),this.showCopyNotice=!0,setTimeout((()=>{this.showCopyNotice=!1}),1500)}},watch:{address(){this.loadData()}},created(){this.eventBus.on("dataChange",this.loadData),this.loadData(),this.open=this.startOpen},beforeUnmount(){this.eventBus.off("dataChange",this.loadData)}},V=a(83744);const N=(0,V.Z)($,[["render",A],["__scopeId","data-v-6e17f07a"]]);var W=N},80054:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var o=a(66252),s=a(3577);const n={class:"ae-input-box"},i={key:0,class:"ae-input-header"},l=["for"],r=["id","value"];function d(e,t,a,d,c,u){return(0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["ae-input-container",{focus:c.focus,error:a.error}])},[(0,o._)("div",n,[a.label?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("label",{for:a.id,class:"ae-input-label"},(0,s.zw)(a.label),9,l),(0,o.WI)(e.$slots,"header",{},void 0,!0)])):(0,o.kq)("",!0),e.$slots.default?(0,o.WI)(e.$slots,"default",{key:2,context:this},void 0,!0):((0,o.wg)(),(0,o.iD)("input",(0,o.dG)({key:1,class:["ae-input",{aemount:a.aemount}],id:a.id,value:a.modelValue,onFocus:t[0]||(t[0]=e=>c.focus=!0),onBlur:t[1]||(t[1]=e=>{u.propagateEvent(e),c.focus=!1}),onInput:t[2]||(t[2]=(...e)=>u.propagateEventValue&&u.propagateEventValue(...e))},e.$attrs),null,16,r))]),(0,o.WI)(e.$slots,"footer",{},void 0,!0)],2)}var c={name:"ae-input",data(){return{focus:!1}},emits:["update:modelValue","blur"],props:{id:String,modelValue:[String,Number],label:String,aemount:Boolean,aeddress:Boolean,error:Boolean},methods:{propagateEvent(e){this.$emit(e.type,e)},propagateEventValue(e){this.$emit("update:modelValue",e.target.value)}}},u=a(83744);const h=(0,u.Z)(c,[["render",d],["__scopeId","data-v-fa932c3c"]]);var g=h},50811:function(e,t,a){"use strict";a.d(t,{Z:function(){return U}});a(57658);var o=a(66252),s=a(3577),n=a(35584),i=a.p+"img/check_circle-24px.f471ff21.svg";const l={class:"ae-card cursor-pointer"},r={class:"flex items-center vote-id w-full"},d=(0,o._)("img",{class:"h-6",src:n,alt:"hash"},null,-1),c={class:"text-primary text-2xl leading-none mr-2"},u={class:"text-2xl leading-none break-words max-w-85"},h={key:0,class:"mt-2 flex items-center"},g=(0,o._)("img",{src:i,class:"mb-1",alt:"checkbox"},null,-1),p={class:"pl-1 leading-none text-gray-600"},w={class:"text-gray-500 text-sm mt-1"},v={key:0},m={key:1},y={key:2},f={key:3},b={key:4};function k(e,t,a,n,i,k){const x=(0,o.up)("AeIdentityLight"),D=(0,o.up)("ae-loader");return(0,o.wg)(),(0,o.iD)("div",l,[a.data.delegatee?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"flex bg-gray-200 text-gray-600 text-sm px-4 py-2 rounded-t",onClick:t[0]||(t[0]=t=>e.$router.push(`/account/${a.data.delegatee}`))},[(0,o.Wm)(x,{address:a.data.delegatee,collapsed:!0,balance:""},null,8,["address"]),(0,o.Uk)(" voted with this stake in ")])):(0,o.kq)("",!0),(0,o._)("div",{class:"p-4 pb-2",onClick:t[1]||(t[1]=t=>e.$router.push(`/poll/${a.id}`))},[(0,o._)("div",r,[d,(0,o._)("span",c,(0,s.zw)(a.id),1),(0,o._)("span",u,(0,s.zw)(a.data.title),1)]),a.showVote?((0,o.wg)(),(0,o.iD)("div",h,[g,(0,o.Uk)(),(0,o._)("span",p,(0,s.zw)(a.data.vote),1)])):(0,o.kq)("",!0),(0,o._)("div",w,[i.percentOfTotalSupply?((0,o.wg)(),(0,o.iD)("span",v,(0,s.zw)(i.percentOfTotalSupply)+" stake - ",1)):i.loading?((0,o.wg)(),(0,o.iD)("span",m,[(0,o.Wm)(D),(0,o.Uk)(" stake - ")])):(0,o.kq)("",!0),k.isClosed?((0,o.wg)(),(0,o.iD)("span",y,"closed at "+(0,s.zw)(a.data.close_height)+" (~"+(0,s.zw)(k.absTimeDifferenceString)+" ago)",1)):"bigint"!==typeof a.data.close_height?((0,o.wg)(),(0,o.iD)("span",f,"never closes")):((0,o.wg)(),(0,o.iD)("span",b,"closes in "+(0,s.zw)(k.timeDifferenceString),1))])])])}var x=a(10237),D=a(45468),C=a(81251);const _={class:"ae-loader"};function T(e,t,a,s,n,i){return(0,o.wg)(),(0,o.iD)("span",_)}var E={name:"ae-loader"},P=a(83744);const S=(0,P.Z)(E,[["render",T],["__scopeId","data-v-430febc9"]]);var A=S,O=a(16395),I=a(25108),Z={components:{AeLoader:A,AeIdentityLight:D.Z},data(){return{loading:!0,percentOfTotalSupply:null,voteCount:null,height:0}},props:{id:{type:Number},data:{type:Object},showVote:{type:Boolean,default:!1}},computed:{isClosed(){return Number(this.data.close_height)<this.height},timeDifference(){return 3*(Number(this.data.close_height)-this.height)*60*1e3},timeDifferenceString(){return(0,O.$6)(this.timeDifference)},absTimeDifferenceString(){return(0,O.$6)(Math.abs(this.timeDifference))}},async mounted(){new x.Z(C.gU.networkId).pollOverview(this.data.poll).then((e=>{null!==e&&(this.percentOfTotalSupply=e.percentOfTotalSupply?(0,O.T3)(e.percentOfTotalSupply,2):null,this.voteCount=e.voteCount),this.loading=!1})).catch((e=>{I.error(e),this.loading=!1})),this.height=await C.SZ.getHeight()}};const q=(0,P.Z)(Z,[["render",k]]);var U=q},65396:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Q}});var o=a(66252),s=a(49963),n=a(3577),i=a.p+"img/edit.f337c920.svg",l=a.p+"img/delete.15af5762.svg",r=a(76705);const d=e=>((0,o.dD)("data-v-5593c9a2"),e=e(),(0,o.Cn)(),e),c={class:"overlay-loader"},u={key:0,id:"account-summary"},h={key:1},g=d((()=>(0,o._)("div",{class:"mx-4 mt-4"},"Delegatee",-1))),p={class:"ae-card mx-4 my-2 py-4 px-3 flex justify-between",id:"account-delegatee"},w={key:0,class:"flex ml-auto"},v=d((()=>(0,o._)("div",{class:"h-full border-r border-gray-500 opacity-50"},null,-1))),m={key:2},y=d((()=>(0,o._)("div",{class:"mx-4 mt-4"},"Delegate your voting power",-1))),f={class:"flex bg-white mx-4 my-2"},b=d((()=>(0,o._)("div",{class:"ml-auto border-r border-gray-500 opacity-50 my-2"},null,-1))),k={class:"flex w-full text-center text-gray-500 mt-4 text-sm"},x={key:3,id:"account-tab-delegations"},D={key:0,hidden:""},C={key:1},_={key:0,class:"mx-4 mt-1 text-xs"},T={key:2,class:"text-gray-500 text-xl text-center my-8"},E={key:4,id:"account-tab-votes"},P={key:0,hidden:""},S={key:1,class:"mt-1"},A={key:2,class:"text-gray-500 text-xl text-center my-8"},O={key:5,id:"account-tab-polls"},I={key:0,hidden:""},Z={key:1,class:"mt-1"},q={key:2,class:"text-gray-500 text-xl text-center py-4 my-4"},U={class:"flex-1 rounded-full bg-gray-500 text-white px-4 py-2 ae-error-field"};function L(e,t,a,d,L,z){const B=(0,o.up)("BiggerLoader"),$=(0,o.up)("AccountHeader"),V=(0,o.up)("ae-identity-light"),N=(0,o.up)("ae-input"),W=(0,o.up)("PollListing"),R=(0,o.up)("BottomButtons"),j=(0,o.up)("CriticalErrorOverlay");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.wy)((0,o._)("div",c,[(0,o.Wm)(B)],512),[[s.F8,L.showLoading&&!L.error]]),L.address?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)($,{address:L.address,canOpen:!1},null,8,["address"])])):(0,o.kq)("",!0),L.delegation?((0,o.wg)(),(0,o.iD)("div",h,[g,(0,o._)("div",p,[(0,o.Wm)(V,{collapsed:!0,balance:"",onClick:t[0]||(t[0]=e=>z.switchAccount(L.delegation)),address:L.delegation},null,8,["address"]),L.isOwnAccount?((0,o.wg)(),(0,o.iD)("div",w,[(0,o._)("img",{src:i,class:"pr-4",onClick:t[1]||(t[1]=()=>{L.delegatee=L.delegation,L.delegation=null}),alt:"edit"}),v,(0,o._)("img",{src:l,class:"pl-4 pr-1",onClick:t[2]||(t[2]=(...e)=>z.revokeDelegation&&z.revokeDelegation(...e)),alt:"delete"})])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),!L.delegation&&L.isOwnAccount?((0,o.wg)(),(0,o.iD)("div",m,[y,(0,o._)("div",f,[(0,o.Wm)(N,{label:"Delegatee",modelValue:L.delegatee,"onUpdate:modelValue":t[3]||(t[3]=e=>L.delegatee=e),aeddress:""},null,8,["modelValue"]),b,(0,o._)("img",{src:r,class:"px-4 rotate-180",onClick:t[4]||(t[4]=(...e)=>z.createDelegation&&z.createDelegation(...e)),alt:"back"})])])):(0,o.kq)("",!0),(0,o._)("div",k,[(0,o._)("div",{class:(0,n.C_)(["flex-1 pb-2 border-b-2 border-gray-300 cursor-pointer",{"active-tab":"delegations"===L.activeTab}]),onClick:t[5]||(t[5]=e=>z.switchTab("delegations"))},"DELEGATIONS ",2),(0,o._)("div",{class:(0,n.C_)(["flex-1 pb-2 border-b-2 border-gray-300 cursor-pointer",{"active-tab":"votes"===L.activeTab}]),onClick:t[6]||(t[6]=e=>z.switchTab("votes"))},"VOTES ",2),(0,o._)("div",{class:(0,n.C_)(["flex-1 pb-2 border-b-2 border-gray-300 cursor-pointer",{"active-tab":"polls"===L.activeTab}]),onClick:t[7]||(t[7]=e=>z.switchTab("polls"))},"POLLS ",2)]),"delegations"===L.activeTab?((0,o.wg)(),(0,o.iD)("div",x,["delegations"===L.activeTab?((0,o.wg)(),(0,o.iD)("span",D,(0,n.zw)(L.activeTab),1)):(0,o.kq)("",!0),L.delegations.length?((0,o.wg)(),(0,o.iD)("div",C,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(L.delegations,(({delegator:e,delegatorAmount:t,includesIndirectDelegations:a})=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"ae-card py-4 mx-4 my-2"},[(0,o.Wm)(V,{collapsed:!0,balance:t,address:e,onClick:t=>z.switchAccount(e),class:"mx-4"},null,8,["balance","address","onClick"]),a?((0,o.wg)(),(0,o.iD)("div",_,"(includes more indirect delegations)")):(0,o.kq)("",!0)])))),128))])):((0,o.wg)(),(0,o.iD)("div",T," Could not find any delegations to "+(0,n.zw)(L.isOwnAccount?"you":"this account")+". ",1))])):(0,o.kq)("",!0),"votes"===L.activeTab?((0,o.wg)(),(0,o.iD)("div",E,["votes"===L.activeTab?((0,o.wg)(),(0,o.iD)("span",P,(0,n.zw)(L.activeTab),1)):(0,o.kq)("",!0),L.votedInPolls.length?((0,o.wg)(),(0,o.iD)("div",S,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(L.votedInPolls,(([e,t])=>((0,o.wg)(),(0,o.iD)("div",{class:"my-2",key:e},[(0,o.Wm)(W,{id:Number(e),data:t,showVote:!0,class:"mx-4"},null,8,["id","data"])])))),128))])):((0,o.wg)(),(0,o.iD)("div",A," Could not find any votes. "))])):(0,o.kq)("",!0),"polls"===L.activeTab?((0,o.wg)(),(0,o.iD)("div",O,["polls"===L.activeTab?((0,o.wg)(),(0,o.iD)("span",I,(0,n.zw)(L.activeTab),1)):(0,o.kq)("",!0),L.authorOfPolls.length?((0,o.wg)(),(0,o.iD)("div",Z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(L.authorOfPolls,(([e,t])=>((0,o.wg)(),(0,o.iD)("div",{class:"my-2",key:e},[(0,o.Wm)(W,{id:Number(e),data:t,class:"mx-4"},null,8,["id","data"])])))),128))])):((0,o.wg)(),(0,o.iD)("div",q," Could not find any polls created by "+(0,n.zw)(L.isOwnAccount?"you":"this account")+". ",1))])):(0,o.kq)("",!0),((0,o.wg)(),(0,o.j4)(R,{htmlId:"account-nav-buttons","search-bar":!0,"search-button":!0,onSearchSubmit:z.handleSearch,key:`bottomButtons${L.address}`},null,8,["onSearchSubmit"])),L.searchError?((0,o.wg)(),(0,o.iD)("div",{key:6,class:"fixed bottom-36 px-8 w-full max-w-desktop",onClickOnce:t[8]||(t[8]=e=>L.searchError=null)},[(0,o._)("div",U,(0,n.zw)(L.searchError),1)],32)):(0,o.kq)("",!0),(0,o.Wm)(j,{error:L.error,onContinue:t[9]||(t[9]=e=>L.error=null)},null,8,["error"])])}a(57658);var z=a(81251),B=a(23907),$=a(58572),V=a(45468),N=a(70794),W=a(10237),R=a(50811),j=a(94848),H=a(20164),Y=a(70762),M=a(80054),X=a(7319),K=a(25108),F={name:"AccountPage",components:{CriticalErrorOverlay:Y.Z,AccountHeader:H.Z,BottomButtons:j.Z,AeInput:M.Z,BiggerLoader:$.Z,AeIdentityLight:V.Z,PollListing:R.Z},data(){return{showLoading:!0,address:"",balance:null,power:null,delegatee:"",isOwnAccount:!1,delegation:null,delegatedPower:null,activeTab:null,delegations:[],votedInPolls:[],authorOfPolls:[],error:null,searchError:null,availableTabs:["delegations","votes","polls"]}},computed:{},watch:{$route(e){this.address!==e.params.account?this.loadData():this.activeTab=e.query.tab?e.query.tab:"delegations"}},methods:{handleSearch(e){if(this.searchError=null,!e)return this.searchError="Please enter an address";B.NX(e)?this.switchAccount(e):this.searchError="The address is not valid"},switchAccount(e){e&&this.$router.push({name:"account",params:{account:e}})},switchTab(e){this.activeTab!==e&&this.$router.push({query:{tab:e}})},touchStartEvent(e){this.startPosition={x:e.touches[0].clientX,y:e.touches[0].clientY}},touchEndEvent(e){const t={x:e.changedTouches[e.changedTouches.length-1].clientX-this.startPosition.x,y:e.changedTouches[e.changedTouches.length-1].clientY-this.startPosition.y};Math.abs(t.x)>Math.abs(t.y)&&Math.abs(t.x)>100&&this.swipeTab(t.x),this.startPosition={x:null,y:null}},swipeTab(e){const t=this.availableTabs.indexOf(this.activeTab);let a=e>0?-1:1;t+a<0&&(a=4),this.switchTab(this.availableTabs[(t+a)%this.availableTabs.length])},async createDelegation(){if(this.delegatee.includes("ak_")){this.showLoading=!0;try{await X.Z.registry.methods.delegate(this.delegatee,{omitUnknown:!0}),await new W.Z(z.gU.networkId).contractEvent("Delegation").catch(K.error),await this.loadData()}catch(e){K.error(e),this.showLoading=!1,this.error="Could not create your delegation. Please try again."}}},async revokeDelegation(){this.showLoading=!0;try{await X.Z.registry.methods.revoke_delegation({omitUnknown:!0}),await new W.Z(z.gU.networkId).contractEvent("RevokeDelegation").catch(K.error),await this.loadData()}catch(e){K.error(e),this.showLoading=!1,this.error="Could not revoke your delegation. Please try again."}},resetData(){this.showLoading=!0,this.delegatee=null,this.delegations=[],this.votedInPolls=[],this.authorOfPolls=[],this.delegation=null,this.totalStake=null},async loadData(){this.resetData(),this.address=this.$route.params.account,z.gU.isStatic||(this.isOwnAccount=this.address===z.gU.address);const e=z.SZ.getBalance(this.address).then((e=>{this.balance=e})),t=X.Z.delegation(this.address).catch((e=>{K.error(e),this.error="Could not fetch delegation."})),a=X.Z.delegations(this.address).catch((e=>{K.error(e),this.error="Could not fetch delegations."})),o=new W.Z(z.gU.networkId).delegatedPower(this.address).then((async t=>{await e,null!==t&&(this.delegatedPower=t.delegatedPower,this.totalStake=new N.Z(this.balance).plus(this.delegatedPower))})).catch(K.error),s=new W.Z(z.gU.networkId).accountPollVoterAuthor(this.address).then((e=>{null!==e&&(this.votedInPolls=e.votedInPolls.filter((e=>e[1].is_listed)),this.votedInPolls=this.votedInPolls.concat(e.delegateeVotes.filter((t=>t[1].is_listed&&!e.votedInPolls.some((e=>e[0]===t[0]))))),this.votedInPolls=this.votedInPolls.sort(((e,t)=>t[0]-e[0])),this.authorOfPolls=e.authorOfPolls.filter((e=>e[1].is_listed)).sort(((e,t)=>t[0]-e[0])))})).catch(K.error),[n,i]=await Promise.all([t,a,e,o,s]);this.delegation=n,this.delegations=i,this.showLoading=!1},async goToOwnAccountPage(){await this.switchAccount(z.gU.address)}},async mounted(){this.eventBus.on("dataChange",this.goToOwnAccountPage),await this.loadData(),this.activeTab=this.$route.query.tab?this.$route.query.tab:"delegations",document.addEventListener("touchstart",this.touchStartEvent,!1),document.addEventListener("touchend",this.touchEndEvent,!1)},beforeUnmount(){this.eventBus.off("dataChange",this.goToOwnAccountPage),document.removeEventListener("touchstart",this.touchStartEvent,!1),document.removeEventListener("touchend",this.touchEndEvent,!1)}},G=a(83744);const J=(0,G.Z)(F,[["render",L],["__scopeId","data-v-5593c9a2"]]);var Q=J}}]);
//# sourceMappingURL=account.0c5a7494.js.map